angular.module("bootstrap-tagsinput",[]).directive("bootstrapTagsinput",[function(){function e(e,t){return t?angular.isFunction(e.$parent[t])?e.$parent[t]:function(e){return e[t]}:void 0}return{restrict:"EA",scope:{model:"=ngModel"},template:"<select multiple></select>",replace:!1,link:function(t,n,a){$(function(){angular.isArray(t.model)||(t.model=[]);var i=$("select",n);i.tagsinput({typeahead:{source:angular.isFunction(t.$parent[a.typeaheadSource])?t.$parent[a.typeaheadSource]:null},itemValue:e(t,a.itemvalue),itemText:e(t,a.itemtext),tagClass:angular.isFunction(t.$parent[a.tagclass])?t.$parent[a.tagclass]:function(e){return a.tagclass}});for(var r=0;r<t.model.length;r++)i.tagsinput("add",t.model[r]);i.on("itemAdded",function(e){-1===t.model.indexOf(e.item)&&t.model.push(e.item)}),i.on("itemRemoved",function(e){var n=t.model.indexOf(e.item);-1!==n&&t.model.splice(n,1)});var o=t.model.slice();t.$watch("model",function(){var e,n=t.model.filter(function(e){return-1===o.indexOf(e)}),a=o.filter(function(e){return-1===t.model.indexOf(e)});for(o=t.model.slice(),e=0;e<a.length;e++)i.tagsinput("remove",a[e]);for(i.tagsinput("refresh"),e=0;e<n.length;e++)i.tagsinput("add",n[e])},!0)})}}}]);
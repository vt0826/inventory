/*
 * SMART CHAT ENGINE (EXTENTION)
 * Copyright (c) 2013 Wen Pu
 * Modified by MyOrange
 * All modifications made are hereby copyright (c) 2014-2015 MyOrange
 */
var chatboxManager=function(){var t=function(t){$.extend(chatbox_config,t)},a=function(t){},o=function(){return(chatbox_config.width+chatbox_config.gap)*showList.length},e=function(t){var a=showList.indexOf(t);if(-1!=a){showList.splice(a,1),diff=chatbox_config.width+chatbox_config.gap;for(var o=a;o<showList.length;o++)offset=$("#"+showList[o]).chatbox("option","offset"),$("#"+showList[o]).chatbox("option","offset",offset-diff)}else alert("NOTE: Id missing from array: "+t)},s=function(t,a,s){var n=showList.indexOf(t),h=boxList.indexOf(t);if(-1!=n);else if(-1!=h){$("#"+t).chatbox("option","offset",o());var f=$("#"+t).chatbox("option","boxManager");f.toggleBox(),showList.push(t)}else{var r=document.createElement("div");r.setAttribute("id",t),$(r).chatbox({id:t,user:a,title:'<i title="'+a.status+'"></i>'+a.first_name+" "+a.last_name,hidden:!1,offset:o(),width:chatbox_config.width,status:a.status,alertmsg:a.alertmsg,alertshow:a.alertshow,messageSent:i,boxClosed:e}),boxList.push(t),showList.push(t),nameList.push(a.first_name)}},i=function(t,a,o){$("#chatlog").doesExist()&&$("#chatlog").append("You said to <b>"+a.first_name+" "+a.last_name+":</b> "+o+"<br/>").effect("highlight",{},500),$("#"+t).chatbox("option","boxManager").addMsg("Me",o)};return{init:t,addBox:s,delBox:a,dispatch:i}}();$("a[data-chat-id]:not(.offline)").click(function(t,a){var o=$(this),e=o.attr("data-chat-id"),s=o.attr("data-chat-fname"),i=o.attr("data-chat-lname"),n=o.attr("data-chat-status")||"online",h=o.attr("data-chat-alertmsg"),f=o.attr("data-chat-alertshow")||!1;chatboxManager.addBox(e,{title:"username"+e,first_name:s,last_name:i,status:n,alertmsg:h,alertshow:f}),t.preventDefault()});
/*
 * SMART CHAT ENGINE
 * Copyright (c) 2013 Wen Pu
 * Modified by MyOrange
 * All modifications made are hereby copyright (c) 2014-2015 MyOrange
 */
!function(t){t.widget("ui.chatbox",{options:{id:null,title:null,user:null,hidden:!1,offset:0,width:300,status:"online",alertmsg:null,alertshow:null,messageSent:function(t,o,e){this.boxManager.addMsg(o.first_name,e)},boxClosed:function(t){},boxManager:{init:function(t){this.elem=t},addMsg:function(o,e){var i=this,s=i.elem.uiChatboxLog,n=document.createElement("div");s.append(n),t(n).hide();var a=!1;if(o){var c=document.createElement("b");t(c).text(o+": "),n.appendChild(c)}else a=!0;var l=document.createElement(a?"i":"span");t(l).text(e),n.appendChild(l),t(n).addClass("ui-chatbox-msg"),t(n).css("maxWidth",t(s).width()),t(n).fadeIn(),t(n).find("span").emoticonize(),i._scrollToBottom(),i.elem.uiChatboxTitlebar.hasClass("ui-state-focus")||i.highlightLock||(i.highlightLock=!0,i.highlightBox())},highlightBox:function(){var t=this;t.elem.uiChatboxTitlebar.effect("highlight",{},300),t.elem.uiChatbox.effect("bounce",{times:2},300,function(){t.highlightLock=!1,t._scrollToBottom()})},toggleBox:function(){this.elem.uiChatbox.toggle()},_scrollToBottom:function(){var t=this.elem.uiChatboxLog;t.scrollTop(t.get(0).scrollHeight)}}},toggleContent:function(t){this.uiChatboxContent.toggle(),this.uiChatboxContent.is(":visible")&&this.uiChatboxInputBox.focus()},widget:function(){return this.uiChatbox},_create:function(){var o=this,e=o.options,i=e.title||"No Title",s=(o.uiChatbox=t("<div></div>")).appendTo(document.body).addClass("ui-widget ui-chatbox").attr("outline",0).focusin(function(){o.uiChatboxTitlebar.addClass("ui-state-focus")}).focusout(function(){o.uiChatboxTitlebar.removeClass("ui-state-focus")}),n=(o.uiChatboxTitlebar=t("<div></div>")).addClass("ui-widget-header ui-chatbox-titlebar "+o.options.status+" ui-dialog-header").click(function(t){o.toggleContent(t)}).appendTo(s),a=((o.uiChatboxTitle=t("<span></span>")).html(i).appendTo(n),(o.uiChatboxTitlebarClose=t('<a href="#" rel="tooltip" data-placement="top" data-original-title="Hide"></a>')).addClass("ui-chatbox-icon ").attr("role","button").hover(function(){a.addClass("ui-state-hover")},function(){a.removeClass("ui-state-hover")}).click(function(t){return s.hide(),o.options.boxClosed(o.options.id),!1}).appendTo(n)),c=(t("<i></i>").addClass("fa fa-times").appendTo(a),(o.uiChatboxTitlebarMinimize=t('<a href="#" rel="tooltip" data-placement="top" data-original-title="Minimize"></a>')).addClass("ui-chatbox-icon").attr("role","button").hover(function(){c.addClass("ui-state-hover")},function(){c.removeClass("ui-state-hover")}).click(function(t){return o.toggleContent(t),!1}).appendTo(n)),l=(t("<i></i>").addClass("fa fa-minus").appendTo(c),(o.uiChatboxContent=t('<div class="'+o.options.alertshow+'"><span class="alert-msg">'+o.options.alertmsg+"</span></div>")).addClass("ui-widget-content ui-chatbox-content ").appendTo(s)),u=((o.uiChatboxLog=o.element).addClass("ui-widget-content ui-chatbox-log custom-scroll").appendTo(l),(o.uiChatboxInput=t("<div></div>")).addClass("ui-widget-content ui-chatbox-input").click(function(t){}).appendTo(l)),d=(o.uiChatboxInputBox=t("<textarea></textarea>")).addClass("ui-widget-content ui-chatbox-input-box ").appendTo(u).keydown(function(e){return e.keyCode&&e.keyCode==t.ui.keyCode.ENTER?(msg=t.trim(t(this).val()),msg.length>0&&o.options.messageSent(o.options.id,o.options.user,msg),t(this).val(""),!1):void 0}).focusin(function(){d.addClass("ui-chatbox-input-focus");var o=t(this).parent().prev();o.scrollTop(o.get(0).scrollHeight)}).focusout(function(){d.removeClass("ui-chatbox-input-focus")});n.find("*").add(n).disableSelection(),l.children().click(function(){o.uiChatboxInputBox.focus()}),o._setWidth(o.options.width),o._position(o.options.offset),o.options.boxManager.init(o),o.options.hidden||s.show(),t(".ui-chatbox [rel=tooltip]").tooltip()},_setOption:function(o,e){if(null!=e)switch(o){case"hidden":e?this.uiChatbox.hide():this.uiChatbox.show();break;case"offset":this._position(e);break;case"width":this._setWidth(e)}t.Widget.prototype._setOption.apply(this,arguments)},_setWidth:function(t){this.uiChatbox.width(t+28+"px"),this.uiChatboxInputBox.css("width",t+18+"px")},_position:function(t){this.uiChatbox.css("right",t)}})}(jQuery),/*
 * jQuery CSSEmoticons plugin 0.2.9
 *
 * Copyright (c) 2010 Steve Schwartz (JangoSteve)
 *
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 * Date: Sun Oct 22 1:00:00 2010 -0500
 */
function(t){t.fn.emoticonize=function(o){for(var e=t.extend({},t.fn.emoticonize.defaults,o),i=[")","(","*","[","]","{","}","|","^","<",">","\\","?","+","=","."],s=[":-)",":o)",":c)",":^)",":-D",":-(",":-9",";-)",":-P",":-p",":-\xde",":-b",":-O",":-/",":-X",":-#",":'(","B-)","8-)",";*(",":-*",":-\\","?-)",": )",": ]","= ]","= )","8 )",": }",": D","8 D","X D","x D","= D",": (",": [",": {","= (","; )","; ]","; D",": P",": p","= P","= p",": b",": \xde",": O","8 O",": /","= /",": S",": #",": X","B )",": |",": \\","= \\",": *",": &gt;",": &lt;"],n=[":)",":]","=]","=)","8)",":}",":D",":(",":[",":{","=(",";)",";]",";D",":P",":p","=P","=p",":b",":\xde",":O",":/","=/",":S",":#",":X","B)",":|",":\\","=\\",":*",":&gt;",":&lt;"],a={"&gt;:)":{cssClass:"red-emoticon small-emoticon spaced-emoticon"},"&gt;;)":{cssClass:"red-emoticon small-emoticon spaced-emoticon"},"&gt;:(":{cssClass:"red-emoticon small-emoticon spaced-emoticon"},"&gt;: )":{cssClass:"red-emoticon small-emoticon"},"&gt;; )":{cssClass:"red-emoticon small-emoticon"},"&gt;: (":{cssClass:"red-emoticon small-emoticon"},";(":{cssClass:"red-emoticon spaced-emoticon"},"&lt;3":{cssClass:"pink-emoticon counter-rotated"},O_O:{cssClass:"no-rotate"},o_o:{cssClass:"no-rotate"},"0_o":{cssClass:"no-rotate"},O_o:{cssClass:"no-rotate"},T_T:{cssClass:"no-rotate"},"^_^":{cssClass:"no-rotate"},"O:)":{cssClass:"small-emoticon spaced-emoticon"},"O: )":{cssClass:"small-emoticon"},"8D":{cssClass:"small-emoticon spaced-emoticon"},XD:{cssClass:"small-emoticon spaced-emoticon"},xD:{cssClass:"small-emoticon spaced-emoticon"},"=D":{cssClass:"small-emoticon spaced-emoticon"},"8O":{cssClass:"small-emoticon spaced-emoticon"},"[+=..]":{cssClass:"no-rotate nintendo-controller"}},c=new RegExp("(\\"+i.join("|\\")+")","g"),l="(^|[\\s\\0])",u=s.length-1;u>=0;--u)s[u]=s[u].replace(c,"\\$1"),s[u]=new RegExp(l+"("+s[u]+")","g");for(var u=n.length-1;u>=0;--u)n[u]=n[u].replace(c,"\\$1"),n[u]=new RegExp(l+"("+n[u]+")","g");for(var d in a)a[d].regexp=d.replace(c,"\\$1"),a[d].regexp=new RegExp(l+"("+a[d].regexp+")","g");var h="span.css-emoticon";e.exclude&&(h+=","+e.exclude);var r=h.split(",");return this.not(h).each(function(){var o=t(this),i="css-emoticon";e.animate&&(i+=" un-transformed-emoticon animated-emoticon");for(var c in a)specialCssClass=i+" "+a[c].cssClass,o.html(o.html().replace(a[c].regexp,"$1<span class='"+specialCssClass+"'>$2</span>"));t(s).each(function(){o.html(o.html().replace(this,"$1<span class='"+i+"'>$2</span>"))}),t(n).each(function(){o.html(o.html().replace(this,"$1<span class='"+i+" spaced-emoticon'>$2</span>"))}),t.each(r,function(e,i){o.find(t.trim(i)+" span.css-emoticon").each(function(){t(this).replaceWith(t(this).text())})}),e.animate&&setTimeout(function(){t(".un-transformed-emoticon").removeClass("un-transformed-emoticon")},e.delay)})},t.fn.unemoticonize=function(o){var e=t.extend({},t.fn.emoticonize.defaults,o);return this.each(function(){var o=t(this);o.find("span.css-emoticon").each(function(){var o=t(this);e.animate?(o.addClass("un-transformed-emoticon"),setTimeout(function(){o.replaceWith(o.text())},e.delay)):o.replaceWith(o.text())})})},t.fn.emoticonize.defaults={animate:!0,delay:500,exclude:"pre,code,.no-emoticons"}}(jQuery);